<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,100,700" media="all">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">

	<title>Another ELMAH tutorial - elmah.io docs</title>

        <link href="../../../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/base.css" rel="stylesheet">
        <link href="../../../style.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="https://elmah.io/">elmah.io</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
                <li><a href="https://elmah.io/features/" id="NavFeatures">Features</a></li>
                <li><a href="https://elmah.io/about/" id="NavAbout">About</a></li>
                <li><a href="https://elmah.io/pricing/" id="NavPricing">Pricing</a></li>
                <li><a href="http://blog.elmah.io/" id="NavBlog">Blog</a></li>
                <li><a href="#" id="NavDocs">Docs</a></li>
            </ul>

        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix" role="complementary">
	
	
		<h4 href="#" >2015 September</h4>
		<ul class="nav bs-sidenav">
		
			<li >
				<a href="../../../Building-a-salable-architecture-to-handle-millions-of-errors/">Building a salable architecture to handle millions of errors</a>
			</li>
		
		</ul>
	
		<h4 href="#" >2013 December</h4>
		<ul class="nav bs-sidenav">
		
			<li >
				<a href="../../12/Running%20ElasticSearch%20in%20a%20cluster%20on%20Azure/">Running ElasticSearch in a cluster on Azure</a>
			</li>
		
		</ul>
	
		<h4 href="#" >2013 September</h4>
		<ul class="nav bs-sidenav">
		
			<li >
				<a href="../../09/ELMAH%20Elasticsearch%20Tutorial/">ELMAH Elasticsearch Tutorial</a>
			</li>
		
		</ul>
	
		<h4 href="#" >2013 August</h4>
		<ul class="nav bs-sidenav">
		
			<li class="active">
				<a href="./">Another ELMAH tutorial</a>
			</li>
		
		</ul>
	
		<h4 href="#" >Changelog</h4>
		<ul class="nav bs-sidenav">
		
			<li >
				<a href="../../../changelog/20131227/">December 27. 2013</a>
			</li>
		
			<li >
				<a href="../../../changelog/20131212/">December 12. 2013</a>
			</li>
		
			<li >
				<a href="../../../changelog/20131111/">November 11. 2013</a>
			</li>
		
			<li >
				<a href="../../../changelog/20131015/">October 15. 2013</a>
			</li>
		
			<li >
				<a href="../../../changelog/20130922/">September 22. 2013</a>
			</li>
		
			<li >
				<a href="../../../changelog/20130908/">September 08. 2013</a>
			</li>
		
		</ul>
	
</div></div>
            <div class="col-md-9" role="main">

<h1 id="does-the-world-need-another-elmah-tutorial">Does the world need another ELMAH tutorial?</h1>
<h2 id="we-think-it-does">We think it does!</h2>
<h5 id="thomas-ardal-august-29-2013"><a href="http://elmah.io/about/">Thomas Ardal</a>, August 29. 2013</h5>
<p>There are a lot of articles trying to explain ELMAH out there, but most of them assume that you already know about ELMAH. This article is an attempt to explain how to get up and running with ELMAH in the simplest possible way.</p>
<p>So let’s start by talking about what ELMAH is. ELMAH is basically a NuGet package for .NET web applications, logging every exception occurring on one or more websites to some storage of your choosing. Unlike other logging frameworks ELMAH will, when configured in its most simple form, log every exception automatically. Sure, there’s an API you can use to log custom errors, but most people only use the automatic part. In this tutorial we will only focus on the basic parts.</p>
<h3 id="installation">Installation</h3>
<p>The easiest way of setting up ELMAH is through NuGet.</p>
<p>Run the following command:</p>
<pre><code class="powershell">Install-Package ELMAH
</code></pre>

<p>… Or add ELMAH by right-clicking on References:</p>
<p><img alt="Manage nuget packages" src="../../../images/2013/08/manage_nuget_packages.png" /></p>
<p>and search for ELMAH:</p>
<p><img alt="Nuget dialog" src="../../../images/2013/08/nuget_dialog.png" /></p>
<p>Click Install and ELMAH is installed in your project.</p>
<p>A lot of configuration has been setup in your web.config, but for now just start your web project. When started, navigate to: http://localhost:port/elmah.axd (replace port with your web applications port number). You should see a website looking like this:</p>
<p><img alt="Elmah page" src="../../../images/2013/08/elmah_page.png" /></p>
<h3 id="logging-errors">Logging errors</h3>
<p>In the default configuration, ELMAH uses an in-memory logger which means that errors on the webserver are logged in-memory only. The in-memory logger is meant for development only and we will look at configuring a persistent logger later in this article.</p>
<p>For now generate a 404 by inputting an URL not found like: http://localhost:port/generate-an-error. Unless you configured custom error pages, the default error page is shown:</p>
<p><img alt="404" src="../../../images/2013/08/404.png" /></p>
<p>Behind the curtain, ELMAH silently hooked into the error event and logged the error.</p>
<h3 id="the-error-list">The error list</h3>
<p>Try navigating to ELMAH again: http://localhost:port/elmah.axd:</p>
<p><img alt="Elmah page with error" src="../../../images/2013/08/elmah_page_with_error.png" /></p>
<p>The error just generated by accessing the illegal URL (/generate-an-error) now shows up on the list. ELMAH shows the most important variables in the table, but if you want the full picture, you can click the Details… link at the end of the error message. This will show ELMAH’s details view:</p>
<p><img alt="Elmah error details" src="../../../images/2013/08/elmah_error_details.png" /></p>
<p>The details view shows you some detailed information about the thrown error. Often you would head straight for the stacktrace, but sometimes debugging is easier if you look at the server variables (cookies, http headers etc.). Scroll down for a view of all the server variables included in the failing HTTP request:</p>
<p><img alt="Elmah error details headers" src="../../../images/2013/08/elmah_error_details_headers.png" /></p>
<h3 id="done-well-almost">Done! Well, almost…</h3>
<p>Perfect! Our new error log works as it should. If you can live with errors being logged in-memory, you can finish the tutorial now. However, remember that errors are cleared if your website is recycled or similar. Most people configure one of the supported logger implementations to be able to keep the errors. The chances that you are running a SQL Server are probably larger than any other database, which is why we chose to show the SQL Server logger in this tutorial. Please visit the official ELMAH site for a description of the other loggers.</p>
<p>Setting up new loggers typically involve a bit of ELMAH configuration as well as some sort of connection string. Open your web.config file and locate the</p>
<p>element. The formatting may be a bit screwed up, but that is easily fixed by clicking Edit | Advanced | Format Document in Visual Studio. The markup looks like this:</p>
<pre><code class="xml">&lt;elmah&gt;
  &lt;!--
    See http://code.google.com/p/elmah/wiki/SecuringErrorLogPages for
    more information on remote access and securing ELMAH.
  --&gt;
  &lt;security allowRemoteAccess=&quot;false&quot; /&gt;
&lt;/elmah&gt;
</code></pre>

<p>Go ahead and delete the comment if you like. Notice that no logger configuration is present other than the security element. As mentioned before, ELMAH uses the in-memory logger when no logger has been specified. The allowRemoteAccess=”false” attribute on the security elements tells ELMAH not to allow connections to errors other than from localhost. You typically don’t want to allow for others to look through you error log, which is why we advise you to keep these security settings.</p>
<p>To configure the SQL Server log, add a new error logger like this:</p>
<pre><code class="xml">&lt;elmah&gt;
  &lt;errorLog type=&quot;Elmah.SqlErrorLog, Elmah&quot; connectionStringName=&quot;ErrorLog&quot;/&gt;
  &lt;security allowRemoteAccess=&quot;false&quot; /&gt;
&lt;/elmah&gt;
</code></pre>

<p>In line 2 a new element has been added. Every error logger in ELMAH is configured using this element. You can only have one error logger per project. The type attribute tells ELMAH what error logger to use. In this case we use the SqlErrorLog class from the Elmah assembly, which we already added through NuGet. Other error loggers may require you to add additional packages. The SqlErrorLog logger requires another attribute named connectionStringName. Again, different error loggers require different configuration to run. The connectionStringName should point to a SQL connection string name ErrorLog:</p>
<pre><code class="xml">&lt;connectionStrings&gt;
  &lt;add
    name=&quot;ErrorLog&quot;
    connectionString=&quot;Data Source=localhost;Initial Catalog=ELMAH;Integrated Security=SSPI;&quot;
    providerName=&quot;System.Data.SqlClient&quot; /&gt;
&lt;/connectionStrings&gt;
</code></pre>

<p>In this example we chose to configure ELMAH to use its own database named ELMAH located on a SQL Server instance on localhost. We recommend using a separate database for ELMAH, but you can use your existing database if you like.</p>
<p>ELMAH requires some tables and stored procedures to be created on the configured database. The scripts for ELMAH 1.2 can be found here: <a href="https://code.google.com/p/elmah/downloads/detail?name=ELMAH-1.2-db-SQLServer.sql">ELMAH v1.2 MS Sql Server DB script</a>.</p>


<br/><br/>
<h2>Comments</h2>
<hr/>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'elmahioblog';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div>
        </div>

    <footer class="col-md-12">
        
    </footer>


        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script src="../../../js/base.js"></script>
    </body>
</html>