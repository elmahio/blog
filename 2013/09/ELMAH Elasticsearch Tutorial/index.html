<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,100,700" media="all">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">

	<title>ELMAH Elasticsearch Tutorial - elmah.io docs</title>

        <link href="../../../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/base.css" rel="stylesheet">
        <link href="../../../style.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="https://elmah.io/">elmah.io</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
                <li><a href="https://elmah.io/features/" id="NavFeatures">Features</a></li>
                <li><a href="https://elmah.io/about/" id="NavAbout">About</a></li>
                <li><a href="https://elmah.io/pricing/" id="NavPricing">Pricing</a></li>
                <li><a href="http://blog.elmah.io/" id="NavBlog">Blog</a></li>
                <li><a href="#" id="NavDocs">Docs</a></li>
            </ul>

        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix" role="complementary">
	
	
		<h4 href="#" >2015 September</h4>
		<ul class="nav bs-sidenav">
		
			<li >
				<a href="../../../Building-a-salable-architecture-to-handle-millions-of-errors/">Building a salable architecture to handle millions of errors</a>
			</li>
		
		</ul>
	
		<h4 href="#" >2013 December</h4>
		<ul class="nav bs-sidenav">
		
			<li >
				<a href="../../12/Running%20ElasticSearch%20in%20a%20cluster%20on%20Azure/">Running ElasticSearch in a cluster on Azure</a>
			</li>
		
		</ul>
	
		<h4 href="#" >2013 September</h4>
		<ul class="nav bs-sidenav">
		
			<li class="active">
				<a href="./">ELMAH Elasticsearch Tutorial</a>
			</li>
		
		</ul>
	
		<h4 href="#" >2013 August</h4>
		<ul class="nav bs-sidenav">
		
			<li >
				<a href="../../08/another_elmah_tutorial/">Another ELMAH tutorial</a>
			</li>
		
		</ul>
	
		<h4 href="#" >Changelog</h4>
		<ul class="nav bs-sidenav">
		
			<li >
				<a href="../../../changelog/20131227/">December 27. 2013</a>
			</li>
		
			<li >
				<a href="../../../changelog/20131212/">December 12. 2013</a>
			</li>
		
			<li >
				<a href="../../../changelog/20131111/">November 11. 2013</a>
			</li>
		
			<li >
				<a href="../../../changelog/20131015/">October 15. 2013</a>
			</li>
		
			<li >
				<a href="../../../changelog/20130922/">September 22. 2013</a>
			</li>
		
			<li >
				<a href="../../../changelog/20130908/">September 08. 2013</a>
			</li>
		
		</ul>
	
</div></div>
            <div class="col-md-9" role="main">

<h1 id="elmah-elasticsearch-tutorial">ELMAH Elasticsearch Tutorial</h1>
<h2 id="this-article-shows-how-elasticsearch-can-be-used-as-a-logging-backend-for-elmah-a-basic-knowledge-about-elmah-is-a-prerequisite-to-reading-this-article-if-youre-new-to-elmah-please-read-our-elmah-tutorial">This article shows how Elasticsearch can be used as a logging backend for ELMAH. A basic knowledge about ELMAH is a prerequisite to reading this article. If you’re new to ELMAH, please read our <a href="http://blog.elmah.io/elmah-tutorial">ELMAH Tutorial</a>.</h2>
<h5 id="thomas-ardal-september-4-2013"><a href="http://elmah.io/about/">Thomas Ardal</a>, September 4. 2013</h5>
<h3 id="elasticsearch">Elasticsearch</h3>
<p>So what’s <a href="http://www.elasticsearch.org/">Elasticsearch</a> and why is it ideal for storing ELMAH errors? To answer the first question, Elasticsearch is a powerful search engine based on Lucene indexes. Why do we think it’s ideal to store ELMAH errors? Well because of three things in fact: Search, Search and Search! Nobody wants to log errors from their webserver, without being able to search them. Elasticsearch provides some really kick-ass search mechanisms, which simply isn’t possible in a SQL Database or requires a lot of knowledge about configuring individual products.</p>
<h3 id="elmahioelasticsearch">Elmah.Io.Elasticsearch</h3>
<p>At <a href="http://elmah.io/">elmah.io</a> we love ELMAH and Elasticsearch so much, that we wrote our own implementation of a ELMAH error logger for Elasticsearch. The code is <a href="https://github.com/elmahio/Elmah.Io.Elasticsearch">open sourced</a> at GitHub and we accept pull requests as well as feature requests like pretty much any other open source project. Elmah.Io.Elasticsearch is in fact a competitor to elmah.io itself, because you could build your own UI on top of our NuGet package. We believe that our product is strong enough for you to want to try it out anyway.</p>
<p>Elmah.Io.Elasticsearch is distributed through NuGet and works like any other error log implementation for ELMAH. Before we start looking at the ELMAH configuration, let’s install Elasticsearch.</p>
<h3 id="installation">Installation</h3>
<p>Before installing Elasticsearch, you need to install a Java JRE. We know it sounds like a world of pain, but Elasticsearch is based on Java and therefore require you to install it :( Just do us a favor and unclick the option which tries to cheat you into installing the Ask toolbar. Java is downloaded from the <a href="http://java.com/en/download/manual.jsp">download page</a>.</p>
<p>Now that we forever infected our machine (3 billion devices is infected with Java, right?), we are ready to install Elasticsearch. Head over to the <a href="http://www.elasticsearch.org/download/">Elasticsearch download page</a> and download the Zip. When downloaded unpack the zip somewhere on your hard drive. Locate the bin folder and double click elasticsearch.bat. If everything have been setup correctly (you probably will experience some sort of obscure Java problem like JAVA_HOME not being specified), Elasticsearch should startup in a new command prompt:</p>
<p><img alt="Elasticsearch" src="../../../images/2013/09/elasticsearch.png" /></p>
<p>Hooray! Elasticsearch is running.</p>
<h3 id="configuring-elmah">Configuring ELMAH</h3>
<p>We know we promised some configuration. Before doing that you need to install the Elmah.Elasticsearch NuGet package (name differ to align with other storage packages for ELMAH):</p>
<pre><code class="powershell">Install-Package Elmah.Elasticsearch
</code></pre>

<p>... and now for the XML. The downloaded NuGet packages already added a hell of a lot of XML to your web.config. In order for ELMAH to use the Elasticsearch error logger, located in the Elmah.Io.Elasticsearch assembly, locate the <code>&lt;elmah&gt;</code> element and make it look like so:</p>
<pre><code class="xml">&lt;elmah&gt;
  &lt;errorLog
    type=&quot;Elmah.Io.Elasticsearch.ElasticsearchErrorLog, Elmah.Io.Elasticsearch&quot;
    connectionStringName=&quot;ElmahIoElasticsearch&quot; /&gt;
&lt;/elmah&gt;
</code></pre>

<p>Notice something missing? You’re right! The connection string to Elasticsearch specified in line 4. That little sucker is actually a name pointer to a standard connection string in the web.config:</p>
<pre><code class="xml">&lt;connectionStrings&gt;
  &lt;add name=&quot;ElmahIoElasticsearch&quot; connectionString=&quot;http://localhost:9200&quot;/&gt;
&lt;/connectionStrings&gt;
</code></pre>

<p>There you have it. ELMAH is now configured to use Elasticsearch using the Elmah.Io.Elasticsearch package. It doesn’t get much easier than that. You can use the default UI in ELMAH by accessing /elmah.axd in your browser. Doing that can be fine, but doesn’t really provide you with the strong search capabilities that we promissed you earlier. Elasticsearch comes with a UI called Head, which can help you do those funky searched. Unfortunatly you need to install Head yourself, but it’s a no brainer using this <a href="http://mobz.github.io/elasticsearch-head/">installation guide</a>.</p>


<br/><br/>
<h2>Comments</h2>
<hr/>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'elmahioblog';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div>
        </div>

    <footer class="col-md-12">
        
    </footer>


        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script src="../../../js/base.js"></script>
    </body>
</html>